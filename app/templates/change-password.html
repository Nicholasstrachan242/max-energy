<!-- page allows LOGGED IN users to change password using their current one -->
<!DOCTYPE html>
<html lang="en">
{% extends "base.html" %}
{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='change-password.css') }}">
{% endblock %}
{% block title %}Change Password{% endblock %}


{% block content %}
<div class='password-form-container'>
    <h2>Change Password</h2>
    <form method="POST">
        {{ form.hidden_tag() }}
        <div class="form-group">
            {{ form.current_password.label }}<br>
            {{ form.current_password(size=32) }}
        </div>
        <div class="form-group">
            {{ form.new_password.label }}<br>
            {{ form.new_password(size=32) }}
        </div>
        <div class="form-group">
            {{ form.confirm_new_password.label }}<br>
            {{ form.confirm_new_password(size=32) }}
        </div>
        <div>
            {{ form.submit(class="button") }}
        </div>

        <!-- Error block for field-specific errors -->
        {% for field, errors in form.errors.items() %}
        {% for error in errors %}
        <p class="error-message">{{ error }}</p>
        {% endfor %}
        {% endfor %}

        <!-- Error block for flash messages tied to routes-->
        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
        {% for category, message in messages %}
        <div class="flash {{ category }}">{{ message }}</div>
        {% endfor %}
        {% endif %}
        {% endwith %}
</div>
{% endblock %}

</html>